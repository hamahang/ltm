function init_button_loader(e,t,a,n){t=t||!1,t?($(e).children("i").removeClass(a),$(e).children("i").addClass(n),$(e).children("i").prop("disabled",!0),$(e).css("cursor","wait"),$(e).children("i").addClass("spinner")):($(e).children("i").removeClass(n),$(e).children("i").addClass(a),$(e).children("i").prop("disabled",!1),$(e).css("cursor","pointer"),$(e).children("i").removeClass("spinner"))}function init_loader_html(e){return'<div class="total_loader">   <div class="total_loader_content" style="">       <div class="spinner_area">           <div class="spinner_rects">               <div class="rect1"></div>               <div class="rect2"></div>               <div class="rect3"></div>               <div class="rect4"></div>               <div class="rect5"></div>           </div>       </div>       <div class="text_area">'+e+"</div>   </div></div>"}function modal_init(e,t,a,n,r){$("#"+e).remove();var l='<div id="'+e+'" class="modal fade">   <div class="modal-dialog '+t+'">       <div class="modal-content">           <div class="modal-header no-padding" style="border-bottom: 1px solid #ddd; background-color: #eee;">'+a+'           </div>           <div class="modal-body no-margin no-padding">'+n+'           </div>           <div class="modal-footer">'+r+"           </div>       </div>   </div></div>";$("#all_modals").append(l),$("#"+e).modal("show")}function init_select2_ajax(e,t,a,n,r,l,i){a=a||!1,i=i||null,r=r||!1,n=n||!1,l=l||"جستجو کنید ...",t=t||'{{ "222"}}',$(e).select2({minimumInputLength:3,allowClear:a,multiple:n,tags:r,dir:"rtl",width:"100%",placeholder:l,language:"fa",ajax:{url:t,dataType:"json",type:"POST",quietMillis:150,data:function(e){return{term:e,selectable_id:i}},results:function(e){return{results:$.map(e,function(e){return{text:e.text,id:e.id}})}}}})}function init_select2_data(e,t,a,n,r,l,i){n=n||!1,a=a||!1,l=l||!1,r=r||!1,i=i||"جستجو کنید ...",t=t||'{{ "222"}}',$(e).select2({minimumInputLength:a,allowClear:n,multiple:r,tags:l,dir:"rtl",width:"100%",placeholder:i,language:"fa",data:t})}function dataTablesGrid(e,t,a,n,r,l,i,o,s,c,u,d,m){var f=[],h=0;_.each(n,function(e,t){f[h++]=jQuery.extend(!0,{},e)}),i=i||!1,o=o||!1,s=s||!1,c=c||0,u=u||"desc",r=r||{},d=d||!1,m=m||!1;window[t+"_rows_selected"]=[],d&&(checkbox_column={title:'<input name="select_all" value="1" type="checkbox"/>',searchable:!1,orderable:!1,width:"1%",className:"dt-body-center",render:function(e,t,a,n){return'<input type="checkbox">'}},f.unshift(checkbox_column));var v={initComplete:function(){1==l&&this.api()._columns().every(function(){var e=this,t=$('<select class="filter-select" data-placeholder="Filter"><option value=""></option></select>').appendTo($(e.footer()).not(":last-child").empty()).on("change",function(){var t=$.fn.dataTable.util.escapeRegex($(this).val());e.search(t?"^"+t+"$":"",!0,!1).draw()});e.data().unique().sort().each(function(e,a){t.append('<option value="'+e+'">'+e+"</option>")})})},ajax:{url:a,type:"POST",data:r},columns:f,scrollX:i,scrollY:o,scrollCollapse:s,order:[[c,u]],rowCallback:function(e,a,n){if(d){func_search_in_obj("id",a.id,window[t+"_rows_selected"])&&($(e).find('input[type="checkbox"]').prop("checked",!0),$(e).addClass("selected"))}},destroy:!0};o||(delete v.scrollY,delete v.scrollCollapse),window[t]=$(e).DataTable(v),d&&($(e).on("click",'input[type="checkbox"]',function(e){var a=$(this).closest("tr"),n=window[t].row(a).data(),r=n,l=$.inArray(r,window[t+"_rows_selected"]);this.checked&&-1===l?window[t+"_rows_selected"].push(r):this.checked||-1===l||window[t+"_rows_selected"].splice(l,1),this.checked?a.addClass("selected"):a.removeClass("selected"),updateDataTableSelectAllCtrl(window[t]),e.stopPropagation(),m&&m(window[t+"_rows_selected"])}),$(e).on("click","tbody td, thead th:first-child",function(e){$(this).parent().find('input[type="checkbox"]').trigger("click")}),$('thead input[name="select_all"]',window[t].table().container()).on("click",function(t){this.checked?$(e+' tbody input[type="checkbox"]:not(:checked)').trigger("click"):$(e+' tbody input[type="checkbox"]:checked').trigger("click"),t.stopPropagation()}),window[t].on("draw",function(){updateDataTableSelectAllCtrl(window[t])}))}function updateDataTableSelectAllCtrl(e){var t=e.table().node(),a=$('tbody input[type="checkbox"]',t),n=$('tbody input[type="checkbox"]:checked',t),r=$('thead input[name="select_all"]',t).get(0);0===n.length?(r.checked=!1,"indeterminate"in r&&(r.indeterminate=!1)):n.length===a.length?(r.checked=!0,"indeterminate"in r&&(r.indeterminate=!1)):(r.checked=!0,"indeterminate"in r&&(r.indeterminate=!0))}function checkUsername(e){var t=/\W/;return null==e?"^<strong>وارد کردن نام کاربری الزامی است.</strong>":t.test(e)?"^<strong>نام کاربری فقط می تواند ترکیبی از اعداد و حروف انگلیسی باشد.</strong>":e.length<5?"^<strong>نام کابری باید حداقل 5 کاراکتر باشد.</strong>":e.length>20?"^<strong>نام کابری باید حداکثر 20 کاراکتر باشد.</strong>":null}function checkCodeMelli(e){if(!/^\d{10}$/.test(e)||"0000000000"==e||"1111111111"==e||"2222222222"==e||"3333333333"==e||"4444444444"==e||"5555555555"==e||"6666666666"==e||"7777777777"==e||"8888888888"==e||"9999999999"==e)return!1;var t,a=parseInt(e[9]),n=0;for(t=0;t<9;++t)n+=parseInt(e[t])*(10-t);return(n%=11)<2&&a==n||n>=2&&a+n==11}function checkMobileNumber(e){return!!/^09[0-9]{9}$/.test(e)}function check_national_id(e){if(e.length<11||0==parseInt(e,10))return!1;if(0==parseInt(e.substr(3,6),10))return!1;for(var t=parseInt(e.substr(10,1),10),a=parseInt(e.substr(9,1),10)+2,n=new Array(29,27,23,19,17),r=0,l=0;l<10;l++)r+=(a+parseInt(e.substr(l,1),10))*n[l%5];return r%=11,10==r&&(r=0),t==r}function init_validatejs(e,t,a,n){n=n||"#"+e.id;for(var r=e.querySelectorAll("button[type=submit]"),l=0;l<r.length;++l)r.item(l).addEventListener("click",function(r){r.preventDefault();var l=$(this).val();handleFormSubmit(e,t,a,l,n)});for(var i=e.querySelectorAll("input, textarea, select"),l=0;l<i.length;++l)"select-one"==i.item(l).type&&($("#"+i.item(l).name).on("select2:unselect",function(a){unformat_all_elements_autoNumeric(),showErrorsForInput(this,(validate(e,t)||{})[this.name]),reformat_all_elements_autoNumeric()}),$("#"+i.item(l).name).on("select2:select",function(a){unformat_all_elements_autoNumeric(),showErrorsForInput(this,(validate(e,t)||{})[this.name]),reformat_all_elements_autoNumeric()})),i.item(l).addEventListener("focusout",function(a){unformat_all_elements_autoNumeric(),showErrorsForInput(this,(validate(e,t)||{})[this.name]),reformat_all_elements_autoNumeric()})}function handleFormSubmit(e,t,a,n,r){unformat_all_elements_autoNumeric();var l=validate(e,t);showErrors(e,l||{}),l?reformat_all_elements_autoNumeric():($(r).append(init_loader_html("لطفا منتظر بمانید...")),a(e,n))}function showErrors(e,t){_.each(e.querySelectorAll("input[name], select[name], textarea[name]"),function(e){showErrorsForInput(e,t&&t[e.name])})}function showErrorsForInput(e,t){if("hidden"!=e.type){var a=closestParent(e.parentNode,"form-group");if(a){var n=a.querySelector(".messages");n&&(resetFormGroup(a),t?(a.classList.add("has-error"),_.each(t,function(e){addError(n,e)})):a.classList.add("has-success"))}}}function closestParent(e,t){return e&&e!=document?e.classList.contains(t)?e:closestParent(e.parentNode,t):null}function resetFormGroup(e){e.classList.remove("has-error"),e.classList.remove("has-success"),_.each(e.querySelectorAll(".help-block.error"),function(e){e.parentNode.removeChild(e)})}function addError(e,t){var a=document.createElement("p");a.classList.add("help-block"),a.classList.add("error"),a.innerHTML=t,e.appendChild(a)}function showMessages(e,t,a,n){$(document).off("click","#"+t),$(document).on("click","#"+t,function(){r.classList.remove("message_show")});var r=document.querySelector("#"+t);r.innerHTML="",r.classList.remove("message_show"),r.classList.remove("message_info"),r.classList.remove("message_success"),r.classList.remove("message_error"),r.classList.add("message_show"),"info"==a&&r.classList.add("message_info"),"success"==a&&r.classList.add("message_success"),"error"==a&&r.classList.add("message_error"),"warning"==a&&r.classList.add("message_warning");var l=document.createElement("ul");$.each(e,function(e,t){console.log(t.items);var a=document.createElement("li"),n=document.createElement("ul");$.each(t.items,function(e,t){console.log(t);var a=document.createElement("li");a.innerHTML="<h6>"+t+"</h6>",n.appendChild(a)}),a.innerHTML="<h5>"+t.title+"</h5>",a.append(n),l.appendChild(a)}),r.append(l);var i=document.createElement("button");i.classList.add("close_message_btn"),i.classList.add("fa"),i.classList.add("fa-times"),r.append(i),document.getElementById(t).scrollIntoView()}function init_autoNumeric(e,t,a){t=t||"v",remove_old_init_autoNumeric(t),e=e||".number_with_separator",a=a||{modifyValueOnWheel:!1,maximumValue:"9999999999999.99999",leadingZero:"deny",decimalPlaces:"0",digitGroupSeparator:",",decimalCharacter:".",decimalCharacterAlternative:",",unformatOnSubmit:!0,currencySymbolPlacement:AutoNumeric.options.currencySymbolPlacement.suffix,roundingMethod:"U"},$(e).addClass("text-left ltr"),$(function(){window.number_with_separator_inputs[t]=new AutoNumeric.multiple(e,a)})}function remove_old_init_autoNumeric(e){e=e||"v",variable_name_inputs=window.number_with_separator_inputs[e];for(element_key in variable_name_inputs)element=variable_name_inputs[element_key],element.remove()}function remove_all_old_init_autoNumeric(){var e=window.number_with_separator_inputs;for(variable_name in e){variable_value=e[variable_name];for(element_key in variable_value)element=variable_value[element_key],element.global.remove(),element.remove()}}function reformat_inited_element_autoNumeric(e){e=e||"v",variable_value=window.number_with_separator_inputs[e];try{for(element_key in variable_value)element=variable_value[element_key],element.global.reformat(),element.reformat()}catch(e){console.log(e)}}function unformat_inited_element_autoNumeric(e){e=e||"v",variable_value=window.number_with_separator_inputs[e];try{for(element_key in variable_value)element=variable_value[element_key],element.global.unformat(),element.unformat()}catch(e){console.log(e)}}function reformat_all_elements_autoNumeric(){try{var e=window.number_with_separator_inputs;for(variable_name in e){variable_value=e[variable_name];for(element_key in variable_value)element=variable_value[element_key],element.global.reformat(),element.reformat()}}catch(e){console.log(e)}}function unformat_all_elements_autoNumeric(){try{var e=window.number_with_separator_inputs;for(variable_name in e){variable_value=e[variable_name];for(element_key in variable_value)element=variable_value[element_key],element.global.unformat(),element.unformat()}}catch(e){console.log(e)}}function set_value_to_inited_element_autoNumeric(e,t){t=t||0,e=e||"v",variable_value=window.number_with_separator_inputs[e];try{for(element_key in variable_value)element=variable_value[element_key],element.set(t)}catch(e){console.log(e)}}function init_confirm_alert(e,t,a,n,r,l,i,o,s){$.confirm({title:e,content:t,type:a,cancelButton:"cancel_button_text",typeAnimated:!0,buttons:{tryAgain:{text:n,btnClass:"btn-danger",action:function(e){l(i)}},close:{text:r,action:function(e){}}}})}function init_pm_notify(e,t,a){var n={addclass:"stack-bottomleft"};switch(e){case"error":case"info":case"success":n.title=t,n.text=a,n.type=e}new PNotify(n)}function style_check_password_strength(e){var t="",a="",n="";switch(e){case 0:case 1:n="ضعیف",t="red",a="#fbe2e2";break;case 2:n="متوسط",t="#9C7454",a="#ffc47d";break;case 3:n="خوب",t="#076d93",a="#b1f3ff";break;case 4:n="قوی",t="green",a="#a1daad";break;case 5:n="خیلی قوی",t="darkgreen",a="#48c36d"}return{result:e,strength:n,color:t,background:a}}function checkPasswordStrength(e){var t=new Array;t.push("[A-Z]"),t.push("[a-z]"),t.push("[0-9]"),t.push("[$@$!%*#?&]");for(var a=0,n=0;n<t.length;n++)new RegExp(t[n]).test(e)&&a++;return a>2&&e.length>8&&a++,style_check_password_strength(a)}function init_bindCheckPasswordStrength(e,t){$(document).on("keyup",e,function(){if(t=$(t)||!1,e=$(e)||!1,password=e.val(),console.log(t,e,password),0==password.length)return void t.fadeOut();t.fadeIn();var a=new Array;a.push("[A-Z]"),a.push("[a-z]"),a.push("[0-9]"),a.push("[$@$!%*#?&]");for(var n=0,r=0;r<a.length;r++)new RegExp(a[r]).test(password)&&n++;n>2&&password.length>8&&n++;var l=style_check_password_strength(n);if(0==t)return l;t.html(l.strength),t.css({color:l.color}),t.css({background:l.background})})}function init_toPersianSwitchKey(e){$(document).on("keyup",e,function(){var e=$(this),t=_toPersianSwitchKey(e.val());e.val(t)})}function init_toEnglishSwitchKey(e){$(document).on("keyup",e,function(){var e=$(this),t=_toEnglishSwitchKey(e.val());e.val(t)})}function _toPersianSwitchKey(e){if(e){for(var t=["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج","چ","ش","س","ی","ب","ل","ا","ت","ن","م","ک","گ","ظ","ط","ز","ر","ذ","د","ئ","پ","پ","و","؟","ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ش","س","ی","ب","ل","ا","ت","ن","م","ظ","ط","ژ","ر","ذ","د","ء"],a=["q","w","e","r","t","y","u","i","o","p","[","]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m","~","`",",","?","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],n=0,r=a.length;n<r;n++)e=e.replaceAll(a[n],t[n]);return e}}function _toEnglishSwitchKey(e){if(e){for(var t=["ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ج","چ","ش","س","ی","ب","ل","ا","ت","ن","م","ک","گ","ظ","ط","ز","ر","ذ","د","ئ","پ","پ","و","؟","ض","ص","ث","ق","ف","غ","ع","ه","خ","ح","ش","س","ی","ب","ل","ا","ت","ن","م","ظ","ط","ژ","ر","ذ","د","ء"],a=["q","w","e","r","t","y","u","i","o","p","[","]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m","~","`",",","?","Q","W","E","R","T","Y","U","I","O","P","A","S","D","F","G","H","J","K","L","Z","X","C","V","B","N","M"],n=0,r=t.length;n<r;n++)e=e.replaceAll(t[n],a[n]);return e}}function clear_form_elements(e){e=e||"document",$(ele).find(":input").each(function(){switch(this.type){case"password":case"select-multiple":case"select-one":case"text":case"textarea":$(this).val("");break;case"checkbox":case"radio":this.checked=!1}})}function func_search_in_obj(e,t,a){for(var n=0;n<a.length;n++)if(a[n][e]==t)return a[n];return!1}function init_doAfterStopTyping(e,t,a,n){e=e||"document",a=a||!1,n=n||500;var r,l=$(e),i=n;$(document).on("keyup",e,function(){clearTimeout(r),r=setTimeout(function(){return a?t(l.val(),a):t(l.val())},i)}),$(document).on("keydown",e,function(){clearTimeout(r)})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).on("click",".jsPanels",function(){var e=$(this),t=e.attr("data-href"),a=e.attr("data-title"),n=e.attr("data-modal")||!1,r=e.attr("data-reload"),l=$(window).height(),i=$(window).width();return data={contentAjax:{url:t,method:"POST",dataType:"json",done:function(e,t,a,n){n.headerTitle(e.header),n.content.html(e.content),n.toolbarAdd("footer",[{item:e.footer}])}},headerTitle:a,theme:"bootstrap-info",contentOverflow:{horizontal:"hidden",vertical:"auto"},panelSize:{width:.65*i,height:.8*l}},n&&(data.paneltype="modal"),JS_Panel=$.jsPanel(data),r&&JS_Panel.find(".jsPanel-controlbar").prepend('<div class="jsPanel-btn" style="margin-left: 10px;"><i class="fa fa-refresh jsPanels-refresh"></i></div>'),JS_Panel.content.html('<div class="loader"></div>'),!1}),$(document).on("click",".jsPanels-refresh",function(){JS_Panel.content.html('<div class="loader"></div>'),JS_Panel.find(".panel-footer").html(""),JS_Panel.contentReload()});var CommonDom_DataTables='<"datatable-header"fl><"datatable-scroll"t><"datatable-footer"ip>',LangJson_DataTables={decimal:"",emptyTable:"هیچ داده ای در جدول وجود ندارد",info:"نمایش _START_ تا _END_ از _TOTAL_ رکورد",infoEmpty:"نمایش 0 تا 0 از 0 رکورد",infoFiltered:"(فیلتر شده از _MAX_ رکورد)",infoPostFix:"",thousands:",",lengthMenu:"نمایش _MENU_ رکورد",loadingRecords:"در حال بارگزاری...",processing:"در حال پردازش...",search:"جستجو: ",zeroRecords:"رکوردی با این مشخصات پیدا نشد",paginate:{first:"ابتدا",last:"انتها",next:"بعدی",previous:"قبلی"},aria:{sortAscending:": فعال سازی نمایش به صورت صعودی",sortDescending:": فعال سازی نمایش به صورت نزولی"}};$.extend($.fn.dataTable.defaults,{autoWidth:!1,dom:CommonDom_DataTables,language:LangJson_DataTables,processing:!0,serverSide:!0,drawCallback:function(){$(this).find("tbody tr").slice(-3).find(".dropdown, .btn-group").addClass("dropup")},preDrawCallback:function(){$(this).find("tbody tr").slice(-3).find(".dropdown, .btn-group").removeClass("dropup")}}),validate.validators.username=function(e,t,a,n){var r=checkUsername(e);return""==r?null:t.message?t.message:r},validate.validators.only_english=function(e,t,a,n){if(null!=e)return/[^A-Za-z]/g.test(e)?t.message:null},validate.validators.only_persian=function(e,t,a,n){if(null!=e)return/@"^([\u0600-\u06FF]+\s?)+$"/g.test(e)?t.message:null},validate.validators.only_numbers=function(e,t,a,n){if(null!=e)return/[^0-9]/g.test(e)?t.message:null},validate.validators.national_id=function(e,t,a,n){if(null!=e)return check_national_id(e)?null:t.message},validate.validators.codeMelli=function(e,t,a,n){if(null!=e)return checkCodeMelli(e)?null:t.message},validate.validators.iranMobileNumber=function(e,t,a,n){if(null!=e)return checkMobileNumber(e)?null:t.message},validate.validators.require_if_presence=function(e,t,a,n){return other_attribute_presence=null==n[t.other_attribute_name],other_attribute_presence?null:null==e?t.message:null},validate.validators.require_if=function(e,t,a,n){var r=!1;switch(t.other_attribute_operand,target_field_value=null==n[t.other_attribute_name]?0:n[t.other_attribute_name],t.other_attribute_operand){case">":r=target_field_value>t.other_attribute_value;break;case"<":r=target_field_value<t.other_attribute_value;break;case">=":r=target_field_value>=t.other_attribute_value;break;case"<=":r=target_field_value<=t.other_attribute_value;break;case"<>":case"!=":r=target_field_value!=t.other_attribute_value;break;case"!==":r=target_field_value!==t.other_attribute_value;break;case"=":case"==":default:r=target_field_value==t.other_attribute_value}if(r){if(null==e)return t.message;if(t.exclusion){var l=!0;return t.exclusion.forEach(function(t){e==t&&(l=!1)}),l?null:t.exclusion_message?t.exclusion_message:t.message}if(t.inclusion){var l=!0;return t.inclusion.forEach(function(t){e!=t&&(l=!1)}),l?null:t.inclusion_message?t.inclusion_message:t.message}return null}return null},validate.extend(validate.validators.datetime,{parse:function(e,t){return+moment.utc(e)},format:function(e,t){var a=t.dateOnly?"YYYY-MM-DD":"YYYY-MM-DD hh:mm:ss";return moment.utc(e).format(a)}}),window.number_with_separator_inputs=[],String.prototype.replaceAll=function(e,t,a){return this.replace(new RegExp(e.replace(/([\/\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,"\\$&"),a?"gi":"g"),"string"==typeof t?t.replace(/\$/g,"$$$$"):t)};
